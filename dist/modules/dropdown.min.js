/**
 * angular-strap
 * @version v2.3.10 - 2016-11-17
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.dropdown',['mgcrea.ngStrap.tooltip']).provider('$dropdown',function(){var e=this.defaults={animation:'am-fade',prefixClass:'dropdown',prefixEvent:'dropdown',placement:'bottom-left',templateUrl:'dropdown/dropdown.tpl.html',trigger:'click',container:!1,keyboard:!0,html:!1,delay:0};this.$get=['$window','$rootScope','$tooltip','$timeout',function(o,n,t,r){function a(o,a){function d(e){return e.target!==o[0]?e.target!==o[0]&&s.hide():void 0}function c(){return p.target||o.parent()}var s={},p=angular.extend({},e,a);s.$scope=p.scope&&p.scope.$new()||n.$new(),p.inlineTemplate===!0&&(p.inlineTemplate='.dropdown-menu'),p.inlineTemplate&&!p.target&&(p.target=o.parent()),s=t(o,p),s.$onKeyDown=function(e){if(/(38|40)/.test(e.keyCode)){e.preventDefault(),e.stopPropagation();var o=angular.element(s.$element[0].querySelectorAll('li:not(.divider) a'));if(o.length){var n;angular.forEach(o,function(e,o){l&&l.call(e,':focus')&&(n=o)}),38===e.keyCode&&n>0?n--:40===e.keyCode&&n<o.length-1?n++:angular.isUndefined(n)&&(n=0),o.eq(n)[0].focus()}}};var u=s.show;s.show=function(){var e=c();(e.hasClass('dropdown')||e.hasClass('dropup'))&&e.addClass('open'),u(),r(function(){p.keyboard&&s.$element&&s.$element.on('keydown',s.$onKeyDown),i.on('click',d)},0,!1)};var f=s.hide;s.hide=function(){var e=s.$element;if(s.$isShown&&(f(),!s.$isShown)){p.keyboard&&e&&e.off('keydown',s.$onKeyDown),i.off('click',d);var o=c();(o.hasClass('dropdown')||o.hasClass('dropup'))&&o.removeClass('open')}};var m=s.destroy;return s.destroy=function(){i.off('click',d),m()},s}var i=angular.element(o.document.body),l=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;return a}]}).directive('bsDropdown',['$window','$sce','$dropdown',function(e,o,n){return{restrict:'EAC',scope:!0,compile:function(e,o){var t={};if(!o.bsDropdown){for(var r=e[0].nextSibling;r&&1!==r.nodeType;)r=r.nextSibling;r&&r.className.split(' ').indexOf('dropdown-menu')>=0&&(t.template=r.outerHTML,t.templateUrl=void 0,r.parentNode.removeChild(r))}return function(e,r,a){t.scope=e,angular.forEach(['template','templateUrl','controller','controllerAs','placement','container','delay','target','trigger','keyboard','html','animation','id','autoClose','inlineTemplate'],function(e){angular.isDefined(o[e])&&(t[e]=o[e])});var i=/^(false|0|)$/i;angular.forEach(['html','container'],function(e){angular.isDefined(a[e])&&i.test(a[e])&&(t[e]=!1)}),angular.forEach(['onBeforeShow','onShow','onBeforeHide','onHide'],function(o){var n='bs'+o.charAt(0).toUpperCase()+o.slice(1);angular.isDefined(a[n])&&(t[o]=e.$eval(a[n]))}),e.$watch(a.bsDropdown,function(o,n){e.content=o},!0);var l=n(r,t);a.bsShow&&e.$watch(a.bsShow,function(e,o){l&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(dropdown),?/i)),e===!0?l.show():l.hide())}),e.$on('$destroy',function(){l&&l.destroy(),t=null,l=null})}}}}]);
//# sourceMappingURL=dropdown.min.js.map
