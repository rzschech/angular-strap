/**
 * angular-strap
 * @version v2.2.4 - 2015-07-01
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.tooltip',['mgcrea.ngStrap.helpers.dimensions']).provider('$tooltip',function(){var t=this.defaults={animation:'am-fade',customClass:'',prefixClass:'tooltip',prefixEvent:'tooltip',container:!1,target:!1,placement:'top',template:'tooltip/tooltip.tpl.html',contentTemplate:!1,trigger:'hover focus',keyboard:!1,html:!1,show:!1,title:'',type:'',delay:0,autoClose:!1,bsEnabled:!0,viewport:{selector:'body',padding:0}};this.$get=['$window','$rootScope','$compile','$q','$templateCache','$http','$animate','$sce','dimensions','$$rAF','$timeout',function(e,o,n,i,a,l,r,s,f,p,u){function c(a,l){function c(){W.$emit(M.prefixEvent+'.show',N)}function b(){if(W.$emit(M.prefixEvent+'.hide',N),L===G){if(z&&'focus'===M.trigger)return a[0].blur();M.inlineTemplate&&L.css({display:'',visibility:''}),H()}}function y(){var t=M.trigger.split(' ');angular.forEach(t,function(t){'click'===t?a.on('click',N.toggle):'manual'!==t&&(a.on('hover'===t?'mouseenter':'focus',N.enter),a.on('hover'===t?'mouseleave':'blur',N.leave),'button'===K&&'hover'!==t&&a.on($?'touchstart':'mousedown',N.$onFocusElementMouseDown))})}function T(){for(var t=M.trigger.split(' '),e=t.length;e--;){var o=t[e];'click'===o?a.off('click',N.toggle):'manual'!==o&&(a.off('hover'===o?'mouseenter':'focus',N.enter),a.off('hover'===o?'mouseleave':'blur',N.leave),'button'===K&&'hover'!==o&&a.off($?'touchstart':'mousedown',N.$onFocusElementMouseDown))}}function C(){'focus'!==M.trigger?L.on('keyup',N.$onKeyUp):a.on('keyup',N.$onFocusKeyUp)}function E(){'focus'!==M.trigger?L.off('keyup',N.$onKeyUp):a.off('keyup',N.$onFocusKeyUp)}function k(){u(function(){w.on('click',x),J=!0},0,!1)}function S(){J&&(w.off('click',x),J=!1)}function x(t){for(var e=t.target;e;){if(e===L[0])return;if(e===w[0])return void N.hide();e=e.parentNode}}function D(t){t=t||M.target||a;var o=t[0],n='BODY'===o.tagName,i=o.getBoundingClientRect(),l={};for(var r in i)l[r]=i[r];null===l.width&&(l=angular.extend({},l,{width:i.right-i.left,height:i.bottom-i.top}));var s=n?{top:0,left:0}:f.offset(o),p={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.prop('scrollTop')||0},u=n?{width:document.documentElement.clientWidth,height:e.innerHeight}:null;return angular.extend({},l,p,u,s)}function O(t,e,o,n){var i,a=t.split('-');switch(a[0]){case'right':i={top:e.top+e.height/2-n/2,left:e.left+e.width};break;case'bottom':i={top:e.top+e.height,left:e.left+e.width/2-o/2};break;case'left':i={top:e.top+e.height/2-n/2,left:e.left-o};break;default:i={top:e.top-n,left:e.left+e.width/2-o/2}}if(!a[1])return i;if('top'===a[0]||'bottom'===a[0])switch(a[1]){case'left':i.left=e.left;break;case'right':i.left=e.left+e.width-o}else if('left'===a[0]||'right'===a[0])switch(a[1]){case'top':i.top=e.top-n;break;case'bottom':i.top=e.top+e.height}return i}function P(t,e){var o=L[0],n=o.offsetWidth,i=o.offsetHeight,a=parseInt(f.css(o,'margin-top'),10),l=parseInt(f.css(o,'margin-left'),10);isNaN(a)&&(a=0),isNaN(l)&&(l=0),t.top=t.top+a,t.left=t.left+l,f.setOffset(o,angular.extend({using:function(t){L.css({top:Math.round(t.top)+'px',left:Math.round(t.left)+'px',right:''})}},t),0);var r=o.offsetWidth,s=o.offsetHeight;if('top'===e&&s!==i&&(t.top=t.top+i-s),!/top-left|top-right|bottom-left|bottom-right/.test(e)){var p=F(e,t,r,s);if(p.left?t.left+=p.left:t.top+=p.top,f.setOffset(o,t),/top|right|bottom|left/.test(e)){var u=/top|bottom/.test(e),c=u?2*p.left-n+r:2*p.top-i+s,d=u?'offsetWidth':'offsetHeight';A(c,o[d],u)}}}function F(t,e,o,n){var i={top:0,left:0},a=M.viewport&&h(M.viewport.selector||M.viewport);if(!a)return i;var l=M.viewport&&M.viewport.padding||0,r=D(a);if(/right|left/.test(t)){var s=e.top-l-r.scroll,f=e.top+l-r.scroll+n;s<r.top?i.top=r.top-s:f>r.top+r.height&&(i.top=r.top+r.height-f)}else{var p=e.left-l,u=e.left+l+o;p<r.left?i.left=r.left-p:u>r.width&&(i.left=r.left+r.width-u)}return i}function A(t,e,o){var n=h('.tooltip-arrow, .arrow',L[0]);n.css(o?'left':'top',50*(1-t/e)+'%').css(o?'top':'left','')}function H(){clearTimeout(q),N.$isShown&&null!==L&&(M.autoClose&&S(),M.keyboard&&E()),Y&&(Y.$destroy(),Y=null),L&&(M.inlineTemplate||L.remove(),L=N.$element=null)}var N={},K=a[0].nodeName.toLowerCase(),M=N.$options=angular.extend({},t,l);if(M.inlineTemplate){var U=i.defer();U.resolve(),N.$promise=U.promise}else N.$promise=g(M.template);var W=N.$scope=M.scope&&M.scope.$new()||o.$new();if(M.delay&&angular.isString(M.delay)){var j=M.delay.split(',').map(parseFloat);M.delay=j.length>1?{show:j[0],hide:j[1]}:j[0]}N.$id=M.id||a.attr('id')||'',M.title&&(W.title=s.trustAsHtml(M.title)),W.$setEnabled=function(t){W.$$postDigest(function(){N.setEnabled(t)})},W.$hide=function(){W.$$postDigest(function(){N.hide()})},W.$show=function(){W.$$postDigest(function(){N.show()})},W.$toggle=function(){W.$$postDigest(function(){N.toggle()})},N.$isShown=W.$isShown=!1;var q,B;M.contentTemplate&&(N.$promise=N.$promise.then(function(t){var e=angular.element(t);return g(M.contentTemplate).then(function(t){var o=h('[ng-bind="content"]',e[0]);return o.length||(o=h('[ng-bind="title"]',e[0])),o.removeAttr('ng-bind').html(t),e[0].outerHTML})}));var I,L,V,R,Y;N.$promise.then(function(t){M.inlineTemplate||(angular.isObject(t)&&(t=t.data),M.html&&(t=t.replace(v,'ng-bind-html="')),t=m.apply(t),V=t,I=n(t)),N.init()}),N.init=function(){M.delay&&angular.isNumber(M.delay)&&(M.delay={show:M.delay,hide:M.delay}),'self'===M.container?R=a:angular.isElement(M.container)?R=M.container:M.container&&(R=h(M.container)),y(),M.target&&(M.target=angular.isElement(M.target)?M.target:h(M.target)),M.inlineTemplate&&(M.inlineTemplate=angular.isElement(M.inlineTemplate)?M.inlineTemplate:h(M.inlineTemplate,M.target&&M.target[0])),M.show&&W.$$postDigest(function(){'focus'===M.trigger?a[0].focus():N.show()})},N.destroy=function(){T(),H(),W.$destroy()},N.enter=function(){return clearTimeout(q),B='in',M.delay&&M.delay.show?void(q=setTimeout(function(){'in'===B&&N.show()},M.delay.show)):N.show()},N.show=function(){if(M.bsEnabled&&!N.$isShown){W.$emit(M.prefixEvent+'.show.before',N);var t,e;M.inlineTemplate?L=N.$element=M.inlineTemplate:(M.container?(t=R,e=R[0].lastChild?angular.element(R[0].lastChild):null):(t=null,e=a),L&&H(),Y=N.$scope.$new(),L=N.$element=I(Y,function(t,e){}),L.css({top:'-9999px',left:'-9999px',right:'auto',display:'block',visibility:'hidden'})),M.animation&&L.addClass(M.animation),M.type&&L.addClass(M.prefixClass+'-'+M.type),M.customClass&&L.addClass(M.customClass),M.inlineTemplate||(e?e.after(L):t.prepend(L)),N.$isShown=W.$isShown=!0,d(W),N.$applyPlacement(),M.inlineTemplate?c():angular.version.minor<=2?r.enter(L,t,e,c):r.enter(L,t,e).then(c),d(W),p(function(){L&&L.css({visibility:'visible'})}),M.keyboard&&('focus'!==M.trigger&&N.focus(),C()),M.autoClose&&k()}},N.leave=function(){return clearTimeout(q),B='out',M.delay&&M.delay.hide?void(q=setTimeout(function(){'out'===B&&N.hide()},M.delay.hide)):N.hide()};var z,G;N.hide=function(t){N.$isShown&&(W.$emit(M.prefixEvent+'.hide.before',N).defaultPrevented||(z=t,G=L,M.inlineTemplate?b():angular.version.minor<=2?r.leave(L,b):r.leave(L).then(b),N.$isShown=W.$isShown=!1,d(W),M.keyboard&&null!==L&&E(),M.autoClose&&null!==L&&S()))},N.toggle=function(){N.$isShown?N.leave():N.enter()},N.focus=function(){L[0].focus()},N.setEnabled=function(t){M.bsEnabled=t},N.setViewport=function(t){M.viewport=t},N.$applyPlacement=function(){if(L){var e=M.placement,o=/\s?auto?\s?/i,n=o.test(e);n&&(e=e.replace(o,'')||t.placement),M.inlineTemplate||L.addClass(M.placement);var i=D(),l=L.prop('offsetWidth'),r=L.prop('offsetHeight');if(n){var s=e,f=M.container?h(M.container):a.parent(),p=D(f),u=s.indexOf('bottom')>=0,c=s.indexOf('top')>=0;if(u||c){var d=i.bottom-p.bottom+r,g=p.top-i.top+r;(u&&d>0||c&&g>0)&&(g>d?c&&(e=s.replace('top','bottom')):u&&(e=s.replace('bottom','top')))}var m='right'===s||'bottom-left'===s||'top-left'===s,$='left'===s||'bottom-right'===s||'top-right'===s;if(m||$){var v=i.right-p.right+l,w=p.left-i.left+l;(m&&v>0||$&&w>0)&&(w>v?$&&(e='left'===s?'right':e.replace('right','left')):m&&(e='right'===s?'left':e.replace('left','right')))}M.inlineTemplate||L.removeClass('top left bottom right').addClass(e)}if(M.target&&(M.target.hasClass('dropdown')||M.target.hasClass('dropup')))e.indexOf('top')>=0?M.target.removeClass('dropdown').addClass('dropup'):M.target.removeClass('dropup').addClass('dropdown'),L.hasClass('dropdown-menu')&&(e.indexOf('left')>=0?L.removeClass('dropdown-menu-right'):L.addClass('dropdown-menu-right'));else{var b=O(e,i,l,r);P(b,e)}}},N.$onKeyUp=function(t){27===t.which&&N.$isShown&&(N.hide(),t.stopPropagation())},N.$onFocusKeyUp=function(t){27===t.which&&(a[0].blur(),t.stopPropagation())},N.$onFocusElementMouseDown=function(t){t.preventDefault(),t.stopPropagation(),N.$isShown?a[0].blur():a[0].focus()};var J=!1;return N}function d(t){t.$$phase||t.$root&&t.$root.$$phase||t.$digest()}function h(t,e){return angular.element((e||document).querySelectorAll(t))}function g(t){return b[t]?b[t]:b[t]=l.get(t,{cache:a}).then(function(t){return t.data})}var m=String.prototype.trim,$='createTouch'in e.document,v=/ng-bind="/gi,w=angular.element(e.document),b={};return c}]}).directive('bsTooltip',['$window','$location','$sce','$tooltip','$$rAF',function(t,e,o,n,i){return{restrict:'EAC',scope:!0,link:function(t,e,a,l){var r={scope:t};angular.forEach(['template','contentTemplate','placement','container','delay','trigger','html','animation','backdropAnimation','type','customClass','id'],function(t){angular.isDefined(a[t])&&(r[t]=a[t])});var s=/^(false|0|)$/i;angular.forEach(['html','container'],function(t){angular.isDefined(a[t])&&s.test(a[t])&&(r[t]=!1)});var f=e.attr('data-target');angular.isDefined(f)&&(r.target=s.test(f)?!1:f),t.hasOwnProperty('title')||(t.title=''),a.$observe('title',function(e){if(angular.isDefined(e)||!t.hasOwnProperty('title')){var n=t.title;t.title=o.trustAsHtml(e),angular.isDefined(n)&&i(function(){p&&p.$applyPlacement()})}}),a.bsTooltip&&t.$watch(a.bsTooltip,function(e,o){angular.isObject(e)?angular.extend(t,e):t.title=e,angular.isDefined(o)&&i(function(){p&&p.$applyPlacement()})},!0),a.bsShow&&t.$watch(a.bsShow,function(t,e){p&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(tooltip),?/i)),t===!0?p.show():p.hide())}),a.bsEnabled&&t.$watch(a.bsEnabled,function(t,e){p&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|1|,?(tooltip),?/i)),p.setEnabled(t===!1?!1:!0))}),a.viewport&&t.$watch(a.viewport,function(t){p&&angular.isDefined(t)&&p.setViewport(t)});var p=n(e,r);t.$on('$destroy',function(){p&&p.destroy(),r=null,p=null})}}}]);
//# sourceMappingURL=../modules/tooltip.min.js.map