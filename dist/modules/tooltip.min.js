/**
 * angular-strap
 * @version v2.3.10 - 2016-11-17
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.tooltip',['mgcrea.ngStrap.core','mgcrea.ngStrap.helpers.dimensions']).provider('$tooltip',function(){var t=this.defaults={animation:'am-fade',customClass:'',prefixClass:'tooltip',prefixEvent:'tooltip',container:!1,target:!1,placement:'top',templateUrl:'tooltip/tooltip.tpl.html',template:'',titleTemplate:!1,trigger:'hover focus',keyboard:!1,html:!1,show:!1,title:'',type:'',delay:0,autoClose:!1,bsEnabled:!0,mouseDownPreventDefault:!0,mouseDownStopPropagation:!0,viewport:{selector:'body',padding:0}};this.$get=['$window','$rootScope','$bsCompiler','$q','$templateCache','$http','$animate','$sce','dimensions','$$rAF','$timeout',function(e,o,n,i,a,r,l,s,f,u,p){function c(a,r){function c(){N.$emit(A.prefixEvent+'.show',F),angular.isDefined(A.onShow)&&angular.isFunction(A.onShow)&&A.onShow(F)}function g(){if(N.$emit(A.prefixEvent+'.hide',F),angular.isDefined(A.onHide)&&angular.isFunction(A.onHide)&&A.onHide(F),I===R){if(L&&'focus'===A.trigger)return a[0].blur();A.inlineTemplate&&I.css({display:'',visibility:''}),P()}}function v(){var t=A.trigger.split(' ');angular.forEach(t,function(t){'click'===t||'contextmenu'===t?a.on(t,F.toggle):'manual'!==t&&(a.on('hover'===t?'mouseenter':'focus',F.enter),a.on('hover'===t?'mouseleave':'blur',F.leave),'button'===O&&'hover'!==t&&a.on(m?'touchstart':'mousedown',F.$onFocusElementMouseDown))})}function w(){for(var t=A.trigger.split(' '),e=t.length;e--;){var o=t[e];'click'===o||'contextmenu'===o?a.off(o,F.toggle):'manual'!==o&&(a.off('hover'===o?'mouseenter':'focus',F.enter),a.off('hover'===o?'mouseleave':'blur',F.leave),'button'===O&&'hover'!==o&&a.off(m?'touchstart':'mousedown',F.$onFocusElementMouseDown))}}function b(){'focus'!==A.trigger?I.on('keyup',F.$onKeyUp):a.on('keyup',F.$onFocusKeyUp)}function y(){'focus'!==A.trigger?I.off('keyup',F.$onKeyUp):a.off('keyup',F.$onFocusKeyUp)}function C(){p(function(){$.on('click',D),Y=!0},0,!1)}function S(){Y&&($.off('click',D),Y=!1)}function D(t){for(var e=t.target;e;){if(e===I[0])return;if(e===$[0])return void F.hide();e=e.parentNode}}function E(t){t=t||A.target||a;var o=t[0],n='BODY'===o.tagName,i=o.getBoundingClientRect(),r={};for(var l in i)r[l]=i[l];null===r.width&&(r=angular.extend({},r,{width:i.right-i.left,height:i.bottom-i.top}));var s=n?{top:0,left:0}:f.offset(o),u={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.prop('scrollTop')||0},p=n?{width:document.documentElement.clientWidth,height:e.innerHeight}:null;return angular.extend({},r,u,p,s)}function T(t,e,o,n){var i,a=t.split('-');switch(a[0]){case'right':i={top:e.top+e.height/2-n/2,left:e.left+e.width};break;case'bottom':i={top:e.top+e.height,left:e.left+e.width/2-o/2};break;case'left':i={top:e.top+e.height/2-n/2,left:e.left-o};break;default:i={top:e.top-n,left:e.left+e.width/2-o/2}}if(!a[1])return i;if('top'===a[0]||'bottom'===a[0])switch(a[1]){case'left':i.left=e.left;break;case'right':i.left=e.left+e.width-o}else if('left'===a[0]||'right'===a[0])switch(a[1]){case'top':i.top=e.top-n+e.height;break;case'bottom':i.top=e.top}return i}function k(t,e){var o=I[0],n=o.offsetWidth,i=o.offsetHeight,a=parseInt(f.css(o,'margin-top'),10),r=parseInt(f.css(o,'margin-left'),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),t.top=t.top+a,t.left=t.left+r,f.setOffset(o,angular.extend({using:function(t){I.css({top:Math.round(t.top)+'px',left:Math.round(t.left)+'px',right:''})}},t),0);var l=o.offsetWidth,s=o.offsetHeight;if('top'===e&&s!==i&&(t.top=t.top+i-s),!/top-left|top-right|bottom-left|bottom-right/.test(e)){var u=x(e,t,l,s);if(u.left?t.left+=u.left:t.top+=u.top,f.setOffset(o,t),/top|right|bottom|left/.test(e)){var p=/top|bottom/.test(e),c=p?2*u.left-n+l:2*u.top-i+s,d=p?'offsetWidth':'offsetHeight';H(c,o[d],p)}}}function x(t,e,o,n){var i={top:0,left:0};if(!F.$viewport)return i;var a=A.viewport&&A.viewport.padding||0,r=E(F.$viewport);if(/right|left/.test(t)){var l=e.top-a-r.scroll,s=e.top+a-r.scroll+n;l<r.top?i.top=r.top-l:s>r.top+r.height&&(i.top=r.top+r.height-s)}else{var f=e.left-a,u=e.left+a+o;f<r.left?i.left=r.left-f:u>r.right&&(i.left=r.left+r.width-u)}return i}function H(t,e,o){var n=h('.tooltip-arrow, .arrow',I[0]);n.css(o?'left':'top',50*(1-t/e)+'%').css(o?'top':'left','')}function P(){clearTimeout(M),F.$isShown&&null!==I&&(A.autoClose&&S(),A.keyboard&&y()),j&&(j.$destroy(),j=null),I&&(A.inlineTemplate||I.remove(),I=F.$element=null)}var F={},A=F.$options=angular.extend({},t,r);if(A.inlineTemplate){var B=i.defer();B.resolve(),F.$promise=B.promise}else F.$promise=n.compile(A);var U=F.$promise,N=F.$scope=A.scope&&A.scope.$new()||o.$new(),O=a[0].nodeName.toLowerCase();if(A.delay&&angular.isString(A.delay)){var K=A.delay.split(',').map(parseFloat);A.delay=K.length>1?{show:K[0],hide:K[1]}:K[0]}F.$id=A.id||a.attr('id')||'',A.title&&(N.title=s.trustAsHtml(A.title)),N.$setEnabled=function(t){N.$$postDigest(function(){F.setEnabled(t)})},N.$hide=function(){N.$$postDigest(function(){F.hide()})},N.$show=function(){N.$$postDigest(function(){F.show()})},N.$toggle=function(){N.$$postDigest(function(){F.toggle()})},F.$isShown=N.$isShown=!1;var M,W,q,I,V,j;U.then(function(t){q=t,F.init()}),F.init=function(){A.delay&&angular.isNumber(A.delay)&&(A.delay={show:A.delay,hide:A.delay}),'self'===A.container?V=a:angular.isElement(A.container)?V=A.container:A.container&&(V=h(A.container)),v(),A.target&&(A.target=angular.isElement(A.target)?A.target:h(A.target)),A.inlineTemplate&&(A.inlineTemplate=angular.isElement(A.inlineTemplate)?A.inlineTemplate:h(A.inlineTemplate,A.target&&A.target[0])),A.show&&N.$$postDigest(function(){'focus'===A.trigger?a[0].focus():F.show()})},F.destroy=function(){w(),P(),N.$destroy()},F.enter=function(){return clearTimeout(M),W='in',A.delay&&A.delay.show?void(M=setTimeout(function(){'in'===W&&F.show()},A.delay.show)):F.show()},F.show=function(){if(A.bsEnabled&&!F.$isShown){N.$emit(A.prefixEvent+'.show.before',F),angular.isDefined(A.onBeforeShow)&&angular.isFunction(A.onBeforeShow)&&A.onBeforeShow(F);var t,e;A.inlineTemplate?I=F.$element=A.inlineTemplate:(A.container?(t=V,e=V[0].lastChild?angular.element(V[0].lastChild):null):(t=null,e=a),I&&P(),j=F.$scope.$new(),I=F.$element=q.link(j,function(t,e){}),I.css({top:'-9999px',left:'-9999px',right:'auto',display:'block',visibility:'hidden'})),A.animation&&I.addClass(A.animation),A.type&&I.addClass(A.prefixClass+'-'+A.type),A.customClass&&I.addClass(A.customClass),A.inlineTemplate||(e?e.after(I):t.prepend(I)),F.$isShown=N.$isShown=!0,d(N),F.$applyPlacement(),A.inlineTemplate?c():angular.version.minor<=2?l.enter(I,t,e,c):l.enter(I,t,e).then(c),d(N),u(function(){I&&I.css({visibility:'visible'}),F.$applyPlacement(),A.keyboard&&('focus'!==A.trigger&&F.focus(),b())}),A.autoClose&&C()}},F.leave=function(){return clearTimeout(M),W='out',A.delay&&A.delay.hide?void(M=setTimeout(function(){'out'===W&&F.hide()},A.delay.hide)):F.hide()};var L,R;F.hide=function(t){F.$isShown&&(N.$emit(A.prefixEvent+'.hide.before',F),angular.isDefined(A.onBeforeHide)&&angular.isFunction(A.onBeforeHide)&&A.onBeforeHide(F),L=t,R=I,A.inlineTemplate?g():angular.version.minor<=2?l.leave(I,g):l.leave(I).then(g),F.$isShown=N.$isShown=!1,d(N),A.keyboard&&null!==I&&y(),A.autoClose&&null!==I&&S())},F.toggle=function(t){t&&t.preventDefault(),F.$isShown?F.leave():F.enter()},F.focus=function(){I[0].focus()},F.setEnabled=function(t){A.bsEnabled=t},F.setViewport=function(t){A.viewport=t},F.$applyPlacement=function(){if(I){var e=A.placement,o=/\s?auto?\s?/i,n=o.test(e);n&&(e=e.replace(o,'')||t.placement),I.addClass(A.placement);var i=E(),a=I.prop('offsetWidth'),r=I.prop('offsetHeight');if(F.$viewport=A.viewport&&h(A.viewport.selector||A.viewport),n){var l=e,s=E(F.$viewport),f=/bottom/.test(l),u=/top/.test(l);if(f||u){var p=i.bottom-s.bottom+r,c=s.top-i.top+r;(f&&p>0||u&&c>0)&&(c>p?u&&(e=l.replace('top','bottom')):f&&(e=l.replace('bottom','top')))}var d='right'===l||'bottom-left'===l||'top-left'===l,g='left'===l||'bottom-right'===l||'top-right'===l;if(d||g){var m=i.right-s.right+a,$=s.left-i.left+a;(d&&m>0||g&&$>0)&&($>m?g&&(e='left'===l?'right':e.replace('right','left')):d&&(e='right'===l?'left':e.replace('left','right')))}I.removeClass(l).addClass(e)}if(A.target&&(A.target.hasClass('dropdown')||A.target.hasClass('dropup')))e.indexOf('top')>=0?A.target.removeClass('dropdown').addClass('dropup'):A.target.removeClass('dropup').addClass('dropdown'),I.hasClass('dropdown-menu')&&(e.indexOf('left')>=0?I.removeClass('dropdown-menu-right'):I.addClass('dropdown-menu-right'));else{var v=T(e,i,a,r);k(v,e)}}},F.$onKeyUp=function(t){27===t.which&&F.$isShown&&(F.hide(),t.stopPropagation())},F.$onFocusKeyUp=function(t){27===t.which&&(a[0].blur(),t.stopPropagation())},F.$onFocusElementMouseDown=function(t){A.mouseDownPreventDefault&&t.preventDefault(),A.mouseDownStopPropagation&&t.stopPropagation(),F.$isShown?a[0].blur():a[0].focus()};var Y=!1;return F}function d(t){t.$$phase||t.$root&&t.$root.$$phase||t.$digest()}function h(t,e){return angular.element((e||document).querySelectorAll(t))}var g=/(ip[ao]d|iphone|android)/gi.test(e.navigator.userAgent),m='createTouch'in e.document&&g,$=angular.element(e.document);return c}]}).directive('bsTooltip',['$window','$location','$sce','$parse','$tooltip','$$rAF',function(t,e,o,n,i,a){return{restrict:'EAC',scope:!0,link:function(t,e,n,r){var l,s={scope:t};angular.forEach(['template','templateUrl','controller','controllerAs','titleTemplate','placement','container','delay','trigger','html','animation','backdropAnimation','type','customClass','id'],function(t){angular.isDefined(n[t])&&(s[t]=n[t])});var f=/^(false|0|)$/i;angular.forEach(['html','container'],function(t){angular.isDefined(n[t])&&f.test(n[t])&&(s[t]=!1)}),angular.forEach(['onBeforeShow','onShow','onBeforeHide','onHide'],function(e){var o='bs'+e.charAt(0).toUpperCase()+e.slice(1);angular.isDefined(n[o])&&(s[e]=t.$eval(n[o]))});var u=e.attr('data-target');angular.isDefined(u)&&(f.test(u)?s.target=!1:s.target=u),t.hasOwnProperty('title')||(t.title=''),n.$observe('title',function(e){if(angular.isDefined(e)||!t.hasOwnProperty('title')){var n=t.title;t.title=o.trustAsHtml(e),angular.isDefined(n)&&a(function(){l&&l.$applyPlacement()})}}),n.$observe('disabled',function(t){t&&l.$isShown&&l.hide()}),n.bsTooltip&&t.$watch(n.bsTooltip,function(e,o){angular.isObject(e)?angular.extend(t,e):t.title=e,angular.isDefined(o)&&a(function(){l&&l.$applyPlacement()})},!0),n.bsShow&&t.$watch(n.bsShow,function(t,e){l&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(tooltip),?/i)),t===!0?l.show():l.hide())}),n.bsEnabled&&t.$watch(n.bsEnabled,function(t,e){l&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|1|,?(tooltip),?/i)),t===!1?l.setEnabled(!1):l.setEnabled(!0))}),n.viewport&&t.$watch(n.viewport,function(t){l&&angular.isDefined(t)&&l.setViewport(t)}),l=i(e,s),t.$on('$destroy',function(){l&&l.destroy(),s=null,l=null})}}}]);
//# sourceMappingURL=tooltip.min.js.map
